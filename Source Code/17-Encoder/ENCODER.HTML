<Html><Head></Head><Title>F:\AL-Awail 2011\PHOENIX\Phoenix Source Codes\17-Encoder\ENCODER.HTML</Title><Body><font face="Times New Roman">
<Body BGCOLOR="#FFFFFF">
<font face="Courier New"><font SIZE="4"><font color="#000000"><font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;******************************************************************************</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;*&nbsp;Title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Encoder.bas&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;*&nbsp;Version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;*&nbsp;Last&nbsp;Updated&nbsp;&nbsp;:&nbsp;01.08.2011&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;*&nbsp;Target&nbsp;Board&nbsp;&nbsp;:&nbsp;Phoenix&nbsp;-&nbsp;REV&nbsp;1.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;*&nbsp;Target&nbsp;MCU&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;ATMega128A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;*&nbsp;Author&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Walid&nbsp;Balid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;*&nbsp;IDE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;BASCOM&nbsp;AVR&nbsp;2.0.7.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;*&nbsp;Peripherals&nbsp;&nbsp;&nbsp;:&nbsp;Pull-Up&nbsp;Resistors&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;*&nbsp;Description&nbsp;&nbsp;&nbsp;:&nbsp;4bit&nbsp;LCD&nbsp;Mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;******************************************************************************</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;Set&nbsp;LCD&nbsp;SWitch&nbsp;on&nbsp;(Backlight)</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;Place&nbsp;the&nbsp;Encoder&nbsp;Jumbers</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'-----------------------[Definitions]</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><B><font color="#000080">$regfile</font></B></font></font><font color="#000000">&nbsp;</font><font color="#FF0000">=</font><font color="#000000">&nbsp;</font><font color="#008080">&quot;m128def.dat&quot;</font><BR>
<font face="Courier New"><font SIZE="4"><B><font color="#000080">$crystal</font></B></font></font><font color="#000000">&nbsp;</font><font color="#FF0000">=</font><font color="#000000">&nbsp;8000000</font><BR>
<font face="Courier New"><font SIZE="4"><B><font color="#000080">$baud</font></B></font></font><font color="#000000">&nbsp;</font><font color="#FF0000">=</font><font color="#000000">&nbsp;9600</font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'-----------------------</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'-----------------------[GPIO&nbsp;Configuration]</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'Config&nbsp;Pind.0&nbsp;=&nbsp;Input&nbsp;:&nbsp;Portd.0&nbsp;=&nbsp;0</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'Config&nbsp;Pind.1&nbsp;=&nbsp;Input&nbsp;:&nbsp;Portd.1&nbsp;=&nbsp;0</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#800000">Portf</font></font></font><font color="#000000">&nbsp;</font><font color="#FF0000">=</font><font color="#000000">&nbsp;</font><font color="#FF0000">&amp;</font><font color="#000000">B11</font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'Config&nbsp;Pine.5&nbsp;=&nbsp;Input&nbsp;:&nbsp;Sw_up&nbsp;Alias&nbsp;Pine.5&nbsp;:&nbsp;Porte.5&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;'PU&nbsp;Internal&nbsp;Resistor</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'Config&nbsp;Pine.4&nbsp;=&nbsp;Input&nbsp;:&nbsp;Sw_left&nbsp;Alias&nbsp;Pine.4&nbsp;:&nbsp;Porte.4&nbsp;=&nbsp;1</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'Config&nbsp;Pine.7&nbsp;=&nbsp;Input&nbsp;:&nbsp;Sw_down&nbsp;Alias&nbsp;Pine.7&nbsp;:&nbsp;Porte.7&nbsp;=&nbsp;1</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'Config&nbsp;Pine.6&nbsp;=&nbsp;Input&nbsp;:&nbsp;Sw_right&nbsp;Alias&nbsp;Pine.6&nbsp;:&nbsp;Porte.6&nbsp;=&nbsp;1</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'-----------------------</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'-----------------------[Variables]</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><B><font color="#000080">Dim</font></B></font></font><font color="#000000">&nbsp;Encoder_val&nbsp;</font><B><font color="#000080">As</font></B><font color="#000000">&nbsp;</font><B><font color="#000080">Byte</font></B><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'---&gt;[Main&nbsp;Program]</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><B><font color="#000080">Print</font></B></font></font><font color="#000000">&nbsp;</font><font color="#008080">&quot;Encoder&nbsp;Test&quot;</font><BR>
<font face="Courier New"><font SIZE="4"><B><font color="#000080">Do</font></B></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#000000">&nbsp;&nbsp;&nbsp;Encoder_val&nbsp;</font></font></font><font color="#FF0000">=</font><font color="#000000">&nbsp;</font><B><font color="#000080">Encoder</font></B><font color="#FF0000">(</font><font color="#800000">pinf</font><font color="#FF0000">.</font><font color="#000000">0&nbsp;</font><font color="#FF0000">,</font><font color="#000000">&nbsp;</font><font color="#800000">Pinf</font><font color="#FF0000">.</font><font color="#000000">1&nbsp;</font><font color="#FF0000">,</font><font color="#000000">&nbsp;En_left&nbsp;</font><font color="#FF0000">,</font><font color="#000000">&nbsp;En_right&nbsp;</font><font color="#FF0000">,</font><font color="#000000">&nbsp;0</font><font color="#FF0000">)</font><BR>
<font face="Courier New"><font SIZE="4"><font color="#000000">&nbsp;&nbsp;&nbsp;</font></font></font><B><font color="#000080">Waitms</font></B><font color="#000000">&nbsp;25</font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;&nbsp;&nbsp;If&nbsp;Sw_up&nbsp;=&nbsp;0&nbsp;Then&nbsp;Print&nbsp;&quot;Switch&nbsp;Up!&quot;</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;&nbsp;&nbsp;If&nbsp;Sw_left&nbsp;=&nbsp;0&nbsp;Then&nbsp;Print&nbsp;&quot;Switch&nbsp;Left!&quot;</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;&nbsp;&nbsp;If&nbsp;Sw_down&nbsp;=&nbsp;0&nbsp;Then&nbsp;Print&nbsp;&quot;Switch&nbsp;Down!&quot;</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'&nbsp;&nbsp;&nbsp;If&nbsp;Sw_right&nbsp;=&nbsp;0&nbsp;Then&nbsp;Print&nbsp;&quot;Switch&nbsp;Right!&quot;</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><B><font color="#000080">Loop</font></B></font></font><BR>
<font face="Courier New"><font SIZE="4"><B><font color="#000080">End</font></B></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'---&lt;[End&nbsp;Main]</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'---&gt;[Turn&nbsp;to&nbsp;Left]</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#000000">En_left</font></font></font><font color="#FF0000">:</font><BR>
<font face="Courier New"><font SIZE="4"><font color="#000000">&nbsp;&nbsp;&nbsp;</font></font></font><B><font color="#000080">Print</font></B><font color="#000000">&nbsp;</font><font color="#008080">&quot;Left&nbsp;rotation&lt;&nbsp;&quot;</font><font color="#000000">&nbsp;</font><font color="#FF0000">;</font><font color="#000000">&nbsp;Encoder_val</font><BR>
<font face="Courier New"><font SIZE="4"><B><font color="#000080">Return</font></B></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'-----------------------</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'---&gt;[Turn&nbsp;to&nbsp;Right]</font></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#000000">En_right</font></font></font><font color="#FF0000">:</font><BR>
<font face="Courier New"><font SIZE="4"><font color="#000000">&nbsp;&nbsp;&nbsp;</font></font></font><B><font color="#000080">Print</font></B><font color="#000000">&nbsp;</font><font color="#008080">&quot;Right&nbsp;rotation&gt;&nbsp;&quot;</font><font color="#000000">&nbsp;</font><font color="#FF0000">;</font><font color="#000000">&nbsp;Encoder_val</font><BR>
<font face="Courier New"><font SIZE="4"><B><font color="#000080">Return</font></B></font></font><BR>
<font face="Courier New"><font SIZE="4"><font color="#008000">'~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</font></font></font></font></font></font></Body></font></Body></Html>